<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberRisk - The Credit Score for Cybersecurity</title>
    <link rel="stylesheet" href="frontend/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <div class="nav-logo">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <span class="nav-title">CyberRisk</span>
            </div>
            <div class="nav-menu">
                <a href="#how-it-works" class="nav-link">How It Works</a>
                <a href="#demo" class="nav-link">Demo</a>
                <a href="#use-cases" class="nav-link">Use Cases</a>
                <button class="btn btn-primary" onclick="showLogin()">Get Started</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-background"></div>
        <div class="hero-content">
            <div class="hero-icon">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h1 class="hero-title">
                <span class="gradient-text">CyberRisk</span><br>
                <span class="hero-subtitle">The Credit Score for</span><br>
                <span class="gradient-text">Cybersecurity</span>
            </h1>
            <p class="hero-description">
                Quantify your organization's cyber vulnerability in one score.<br>
                <span class="hero-highlight">Make informed decisions. Reduce risk. Protect your future.</span>
            </p>
            <div class="hero-buttons">
                <button class="btn btn-primary btn-large" onclick="showLogin()">Get Your Score</button>
                <button class="btn btn-outline btn-large" onclick="scrollToSection('how-it-works')">Learn More</button>
            </div>
            <div class="hero-stats">
                <div class="stat">
                    <div class="stat-number">$4.45M</div>
                    <div class="stat-label">Average data breach cost</div>
                </div>
                <div class="stat">
                    <div class="stat-number">287</div>
                    <div class="stat-label">Days to identify breach</div>
                </div>
                <div class="stat">
                    <div class="stat-number">95%</div>
                    <div class="stat-label">Of breaches are preventable</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Why It Matters Section -->
    <section class="why-matters">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Why It Matters</h2>
                <p class="section-description">
                    In today's digital landscape, cybersecurity isn't just an IT concernâ€”it's a business imperative that affects every aspect of your organization.
                </p>
            </div>
            <div class="cards-grid">
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="card-title">Rising Attacks</h3>
                    <p class="card-description">
                        Cyberattacks are increasing by 15% annually, with sophisticated threats targeting organizations of all sizes.
                    </p>
                    <div class="card-stat">
                        <div class="stat-number">+15%</div>
                        <div class="stat-label">Annual increase</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <h3 class="card-title">Financial Impact</h3>
                    <p class="card-description">
                        The average cost of a data breach has reached $4.45 million, with recovery taking months or years.
                    </p>
                    <div class="card-stat">
                        <div class="stat-number">$4.45M</div>
                        <div class="stat-label">Average breach cost</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="card-title">Manual Processes</h3>
                    <p class="card-description">
                        Traditional security assessments are time-consuming, expensive, and often outdated by the time they're completed.
                    </p>
                    <div class="stat-stat">
                        <div class="stat-number">287 days</div>
                        <div class="stat-label">To identify breach</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="how-works">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">How It Works</h2>
                <p class="section-description">
                    Our three-step process delivers comprehensive cybersecurity assessment in days, not months.
                </p>
            </div>
            <div class="steps">
                <div class="step">
                    <div class="step-number">01</div>
                    <div class="step-content">
                        <div class="step-icon">
                            <i class="fas fa-crosshairs"></i>
                        </div>
                        <h3 class="step-title">Scan</h3>
                        <p class="step-subtitle">Identify Weak Points</p>
                        <p class="step-description">
                            Our advanced AI-powered scanner analyzes your entire digital infrastructure, identifying vulnerabilities across networks, applications, and systems.
                        </p>
                        <ul class="step-features">
                            <li><i class="fas fa-check"></i> Network vulnerability assessment</li>
                            <li><i class="fas fa-check"></i> Application security scanning</li>
                            <li><i class="fas fa-check"></i> Configuration analysis</li>
                            <li><i class="fas fa-check"></i> Threat intelligence integration</li>
                        </ul>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">02</div>
                    <div class="step-content">
                        <div class="step-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3 class="step-title">Analyze</h3>
                        <p class="step-subtitle">Score Your Risk</p>
                        <p class="step-description">
                            Sophisticated algorithms evaluate your security posture, considering industry standards, threat landscape, and organizational context.
                        </p>
                        <ul class="step-features">
                            <li><i class="fas fa-check"></i> Risk scoring algorithm</li>
                            <li><i class="fas fa-check"></i> Industry benchmarking</li>
                            <li><i class="fas fa-check"></i> Threat modeling</li>
                            <li><i class="fas fa-check"></i> Compliance assessment</li>
                        </ul>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">03</div>
                    <div class="step-content">
                        <div class="step-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <h3 class="step-title">Report</h3>
                        <p class="step-subtitle">Clear, Actionable Results</p>
                        <p class="step-description">
                            Receive comprehensive reports with prioritized recommendations, implementation guides, and ongoing monitoring insights.
                        </p>
                        <ul class="step-features">
                            <li><i class="fas fa-check"></i> Prioritized recommendations</li>
                            <li><i class="fas fa-check"></i> Implementation roadmap</li>
                            <li><i class="fas fa-check"></i> Cost-benefit analysis</li>
                            <li><i class="fas fa-check"></i> Continuous monitoring</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section id="demo" class="demo">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Real-World Scenario</h2>
                <p class="section-description">
                    See how CyberRisk helps organizations understand and improve their security posture.
                </p>
            </div>
            <div class="demo-content">
                <div class="demo-card">
                    <div class="demo-header">
                        <div class="demo-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <h3>Company A</h3>
                        <p>Mid-size technology company with 500+ employees</p>
                    </div>
                    <div class="risk-score-container">
                        <div class="risk-score">
                            <div class="score-circle">
                                <div class="score-number">70</div>
                            </div>
                            <div class="score-label">High Risk</div>
                        </div>
                    </div>
                    <div class="demo-stats">
                        <div class="demo-stat">
                            <div class="stat-number">15</div>
                            <div class="stat-label">Critical Issues</div>
                        </div>
                        <div class="demo-stat">
                            <div class="stat-number">42</div>
                            <div class="stat-label">High Priority</div>
                        </div>
                    </div>
                    <div class="demo-findings">
                        <h4>Key Findings:</h4>
                        <ul>
                            <li><i class="fas fa-exclamation-triangle"></i> No multi-factor authentication</li>
                            <li><i class="fas fa-exclamation-triangle"></i> Outdated security patches</li>
                            <li><i class="fas fa-exclamation-triangle"></i> Weak password policies</li>
                            <li><i class="fas fa-exclamation-triangle"></i> Limited employee training</li>
                        </ul>
                    </div>
                </div>
                <div class="demo-recommendations">
                    <h3>Prioritized Recommendations</h3>
                    <div class="recommendation-tabs">
                        <button class="tab-btn active" onclick="showRecommendation(0)">MFA Implementation</button>
                        <button class="tab-btn" onclick="showRecommendation(1)">Patch Management</button>
                        <button class="tab-btn" onclick="showRecommendation(2)">Security Training</button>
                        <button class="tab-btn" onclick="showRecommendation(3)">Network Segmentation</button>
                    </div>
                    <div class="recommendation-content">
                        <div id="rec-0" class="recommendation active">
                            <h4>Implement Multi-Factor Authentication</h4>
                            <p>Add MFA to all critical systems and user accounts to prevent unauthorized access.</p>
                            <div class="rec-details">
                                <div class="rec-detail">
                                    <span class="label">Impact:</span>
                                    <span class="value high">High</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Effort:</span>
                                    <span class="value medium">Medium</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Cost:</span>
                                    <span class="value">$5,000 - $15,000</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Timeline:</span>
                                    <span class="value">2-4 weeks</span>
                                </div>
                            </div>
                        </div>
                        <div id="rec-1" class="recommendation">
                            <h4>Patch Critical Vulnerabilities</h4>
                            <p>Update all systems with the latest security patches, focusing on critical vulnerabilities.</p>
                            <div class="rec-details">
                                <div class="rec-detail">
                                    <span class="label">Impact:</span>
                                    <span class="value critical">Critical</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Effort:</span>
                                    <span class="value high">High</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Cost:</span>
                                    <span class="value">$10,000 - $25,000</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Timeline:</span>
                                    <span class="value">1-2 weeks</span>
                                </div>
                            </div>
                        </div>
                        <div id="rec-2" class="recommendation">
                            <h4>Employee Security Training</h4>
                            <p>Conduct comprehensive cybersecurity awareness training for all employees.</p>
                            <div class="rec-details">
                                <div class="rec-detail">
                                    <span class="label">Impact:</span>
                                    <span class="value medium">Medium</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Effort:</span>
                                    <span class="value low">Low</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Cost:</span>
                                    <span class="value">$2,000 - $5,000</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Timeline:</span>
                                    <span class="value">1 week</span>
                                </div>
                            </div>
                        </div>
                        <div id="rec-3" class="recommendation">
                            <h4>Network Segmentation</h4>
                            <p>Implement network segmentation to limit lateral movement in case of breach.</p>
                            <div class="rec-details">
                                <div class="rec-detail">
                                    <span class="label">Impact:</span>
                                    <span class="value high">High</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Effort:</span>
                                    <span class="value high">High</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Cost:</span>
                                    <span class="value">$15,000 - $30,000</span>
                                </div>
                                <div class="rec-detail">
                                    <span class="label">Timeline:</span>
                                    <span class="value">4-6 weeks</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="performDemoScan()">Try Live Demo Scan</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Welcome Back</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary btn-full">Sign In</button>
            </form>
            <div class="modal-footer">
                <p>Don't have an account? <a href="#" onclick="showRegister()">Sign up here</a></p>
                <div class="demo-credentials">
                    <h4>Demo Credentials:</h4>
                    <p><strong>Admin:</strong> admin / admin123</p>
                    <p><strong>User:</strong> user / user123</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Account</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="registerForm" onsubmit="handleRegister(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="regUsername">Username</label>
                    <input type="text" id="regUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="organization">Organization</label>
                    <input type="text" id="organization" name="organization">
                </div>
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary btn-full">Create Account</button>
            </form>
            <div class="modal-footer">
                <p>Already have an account? <a href="#" onclick="showLogin()">Sign in here</a></p>
            </div>
        </div>
    </div>

    <!-- Dashboard (Hidden by default) -->
    <div id="dashboard" class="dashboard hidden">
        <div class="dashboard-header">
            <div class="dashboard-brand">
                <i class="fas fa-shield-alt"></i>
                <span>CyberRisk</span>
            </div>
            <div class="dashboard-user">
                <span id="userName">Welcome, User!</span>
                <button class="btn btn-ghost" onclick="logout()">Logout</button>
            </div>
        </div>
        <div class="dashboard-content">
            <h1>Welcome back, <span id="userFirstName">User</span>!</h1>
            <p>Monitor your organization's cybersecurity posture and track improvements over time.</p>
            
            <div class="dashboard-actions">
                <button class="btn btn-primary" onclick="performScan()">
                    <i class="fas fa-crosshairs"></i> New Security Scan
                </button>
                <button class="btn btn-outline" onclick="window.print()">
                    <i class="fas fa-chart-bar"></i> Generate Report
                </button>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Current Risk Score</h3>
                    <div class="risk-score-display">
                        <div class="score-circle-large">
                            <div class="score-number" id="currentScore">--</div>
                        </div>
                        <div class="score-info">
                            <div class="score-level" id="riskLevel">No scans yet</div>
                            <div class="score-date" id="lastScanDate">-</div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3>Security Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number" id="totalScans">0</div>
                            <div class="stat-label">Total Scans</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="avgScore">0</div>
                            <div class="stat-label">Avg Score</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="highestScore">0</div>
                            <div class="stat-label">Highest Risk</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="lowestScore">0</div>
                            <div class="stat-label">Lowest Risk</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="scan-history">
                <h3>Recent Scans</h3>
                <div id="scanHistory" class="scan-list">
                    <div class="no-scans">
                        <i class="fas fa-chart-line"></i>
                        <p>No scan history available</p>
                        <button class="btn btn-outline" onclick="performScan()">Perform Your First Scan</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scan Modal -->
    <div id="scanModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Security Scan</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="scanForm" onsubmit="handleScan(event)">
                <div class="form-group">
                    <label for="orgName">Organization Name</label>
                    <input type="text" id="orgName" name="organizationName" required>
                </div>
                <div class="form-group">
                    <label for="targetDomain">Target Domain</label>
                    <input type="text" id="targetDomain" name="targetDomain" required placeholder="example.com">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" id="scanBtn">Start Scan</button>
                    <button type="button" class="btn btn-ghost" onclick="closeModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Demo data and functionality
        let currentUser = null;
        let scanHistory = [];

        // Utility Functions
        function showElement(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.classList.remove('hidden');
            }
        }

        function hideElement(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.classList.add('hidden');
            }
        }

        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('show');
            }
        }

        function closeModal() {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => modal.classList.remove('show'));
        }

        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Demo Authentication
        function handleLogin(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const username = formData.get('username');
            const password = formData.get('password');
            
            // Check demo users first
            if ((username === 'admin' && password === 'admin123') || 
                (username === 'user' && password === 'user123')) {
                currentUser = {
                    username: username,
                    firstName: username === 'admin' ? 'Admin' : 'Demo',
                    lastName: 'User',
                    organization: 'Demo Company'
                };
                showDashboard();
                closeModal();
                return;
            }
            
            // Check registered users
            const storedUser = localStorage.getItem('demoUser');
            if (storedUser) {
                const user = JSON.parse(storedUser);
                if (user.username === username && user.password === password) {
                    currentUser = user;
                    showDashboard();
                    closeModal();
                    return;
                }
            }
            
            // Invalid credentials
            alert('Invalid credentials. Use admin/admin123, user/user123, or your registered account.');
        }

        function handleRegister(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const username = formData.get('username');
            const password = formData.get('password');
            
            // Check if username already exists
            if (username === 'admin' || username === 'user') {
                alert('Username already exists. Please choose a different username.');
                return;
            }
            
            // Create new user
            currentUser = {
                username: username,
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                organization: formData.get('organization'),
                password: password
            };
            
            // Store user in localStorage for persistence
            localStorage.setItem('demoUser', JSON.stringify(currentUser));
            
            alert('Account created successfully! You are now logged in.');
            showDashboard();
            closeModal();
        }

        function logout() {
            currentUser = null;
            scanHistory = [];
            localStorage.removeItem('demoUser');
            hideElement('dashboard');
            showElement('hero');
            showElement('why-matters');
            showElement('how-works');
            showElement('demo');
        }

        // UI Functions
        function showLogin() {
            closeModal();
            showModal('loginModal');
        }

        function showRegister() {
            closeModal();
            showModal('registerModal');
        }

        function showDashboard() {
            hideElement('hero');
            hideElement('why-matters');
            hideElement('how-works');
            hideElement('demo');
            showElement('dashboard');
            
            if (currentUser) {
                document.getElementById('userName').textContent = `Welcome, ${currentUser.firstName}!`;
                document.getElementById('userFirstName').textContent = currentUser.firstName;
            }
            
            updateDashboard();
        }

        // Demo Scan Functions
        function performScan() {
            showModal('scanModal');
        }

        function performDemoScan() {
            // Simulate a demo scan
            const orgName = prompt("Enter organization name:", "TechCorp");
            if (orgName) {
                simulateScan(orgName, "techcorp.com");
            }
        }

        function handleScan(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const orgName = formData.get('organizationName');
            const targetDomain = formData.get('targetDomain');
            
            simulateScan(orgName, targetDomain);
            closeModal();
        }

        function simulateScan(orgName, domain) {
            const scanBtn = document.getElementById('scanBtn');
            const originalText = scanBtn.textContent;
            scanBtn.innerHTML = '<div class="loading"></div> Scanning...';
            scanBtn.disabled = true;
            
            // Simulate scan delay
            setTimeout(() => {
                // Generate random risk score
                const riskScore = Math.floor(Math.random() * 40) + 30; // 30-70 range
                const riskLevel = riskScore >= 60 ? 'High Risk' : riskScore >= 40 ? 'Medium Risk' : 'Low Risk';
                
                // Create scan result
                const scanResult = {
                    id: Date.now(),
                    organizationName: orgName,
                    targetDomain: domain,
                    riskScore: riskScore,
                    riskLevel: riskLevel,
                    scanDate: new Date().toISOString(),
                    vulnerabilities: generateVulnerabilities(),
                    recommendations: generateRecommendations()
                };
                
                // Add to scan history
                scanHistory.unshift(scanResult);
                
                // Update dashboard
                updateDashboard();
                
                // Show results
                alert(`Scan completed!\n\nOrganization: ${orgName}\nRisk Score: ${riskScore}/100 (${riskLevel})\n\nCheck your dashboard for detailed results.`);
                
                scanBtn.textContent = originalText;
                scanBtn.disabled = false;
            }, 2000);
        }

        function generateVulnerabilities() {
            const vulns = [
                { title: "Weak Password Policy", severity: "High", category: "Authentication" },
                { title: "Missing Multi-Factor Authentication", severity: "Critical", category: "Authentication" },
                { title: "Outdated Software Components", severity: "High", category: "Software" },
                { title: "Unencrypted Data Transmission", severity: "Medium", category: "Network" },
                { title: "Insufficient Access Controls", severity: "Medium", category: "Authorization" }
            ];
            return vulns.slice(0, Math.floor(Math.random() * 3) + 2);
        }

        function generateRecommendations() {
            const recs = [
                { title: "Implement Multi-Factor Authentication", priority: "High", cost: "$5,000 - $15,000" },
                { title: "Patch Critical Vulnerabilities", priority: "Critical", cost: "$10,000 - $25,000" },
                { title: "Employee Security Training", priority: "Medium", cost: "$2,000 - $5,000" },
                { title: "Network Segmentation", priority: "High", cost: "$15,000 - $30,000" }
            ];
            return recs.slice(0, Math.floor(Math.random() * 2) + 2);
        }

        function updateDashboard() {
            // Update scan history
            const scanHistoryElement = document.getElementById('scanHistory');
            if (scanHistory.length === 0) {
                scanHistoryElement.innerHTML = `
                    <div class="no-scans">
                        <i class="fas fa-chart-line"></i>
                        <p>No scan history available</p>
                        <button class="btn btn-outline" onclick="performScan()">Perform Your First Scan</button>
                    </div>
                `;
            } else {
                scanHistoryElement.innerHTML = scanHistory.slice(0, 5).map(scan => `
                    <div class="scan-item">
                        <div class="scan-info">
                            <div class="scan-score">${scan.riskScore}</div>
                            <div class="scan-details">
                                <h4>${scan.organizationName}</h4>
                                <p>${new Date(scan.scanDate).toLocaleDateString()}</p>
                            </div>
                        </div>
                        <div class="scan-meta">
                            <div class="risk-level">${scan.riskLevel}</div>
                            <div class="scan-date">${scan.targetDomain}</div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Update statistics
            if (scanHistory.length > 0) {
                const scores = scanHistory.map(scan => scan.riskScore);
                const averageScore = Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length);
                const highestScore = Math.max(...scores);
                const lowestScore = Math.min(...scores);
                
                document.getElementById('totalScans').textContent = scanHistory.length;
                document.getElementById('avgScore').textContent = averageScore;
                document.getElementById('highestScore').textContent = highestScore;
                document.getElementById('lowestScore').textContent = lowestScore;
                
                // Update current score
                const latestScan = scanHistory[0];
                document.getElementById('currentScore').textContent = latestScan.riskScore;
                document.getElementById('riskLevel').textContent = latestScan.riskLevel;
                document.getElementById('lastScanDate').textContent = new Date(latestScan.scanDate).toLocaleDateString();
            }
        }

        // Demo Functions
        function showRecommendation(index) {
            // Hide all recommendations
            const recommendations = document.querySelectorAll('.recommendation');
            recommendations.forEach(rec => rec.classList.remove('active'));
            
            // Show selected recommendation
            const selectedRec = document.getElementById(`rec-${index}`);
            if (selectedRec) {
                selectedRec.classList.add('active');
            }
            
            // Update tab buttons
            const tabBtns = document.querySelectorAll('.tab-btn');
            tabBtns.forEach(btn => btn.classList.remove('active'));
            tabBtns[index].classList.add('active');
        }

        // Initialize App
        function initApp() {
            // Check if user is already logged in
            const storedUser = localStorage.getItem('demoUser');
            if (storedUser) {
                try {
                    currentUser = JSON.parse(storedUser);
                    showDashboard();
                } catch (error) {
                    console.error('Error parsing stored user:', error);
                    localStorage.removeItem('demoUser');
                }
            }
            
            // Add event listeners
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            document.getElementById('scanForm').addEventListener('submit', handleScan);
            
            // Close modal when clicking outside
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        closeModal();
                    }
                });
            });
            
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    scrollToSection(targetId);
                });
            });
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
